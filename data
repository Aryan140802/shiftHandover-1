import fs from 'fs';
import path from 'path';

export default function handler(req, res) {
  const { suffix } = req.query;

  try {
    const filePath = path.join('/home/scripts/deployment_Tracker', `10.188.${suffix}_Deployment.json`);
    const fileContents = fs.readFileSync(filePath, 'utf8');
    const data = JSON.parse(fileContents);
    res.status(200).json(data);
  } catch (error) {
    res.status(404).json({ error: 'File not found' });
  }
}


export const fetchDeploymentData = async (suffix) => {
  try {
    const response = await fetch(`${suffix}`);
    if (!response.ok) {
      throw new Error('File not found');
    }
    return await response.json();
  } catch (error) {
    throw new Error('Failed to fetch deployment data');
  }
};


